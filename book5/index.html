<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tales of Wisdom - Digital Library</title>
    <script type="module">
        import { PageFlip } from "https://cdn.skypack.dev/page-flip@2.0.7";
        window.PageFlip = PageFlip;
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #2c1810 0%, #4a2c1a 100%);
            min-height: 100vh;
            color: #f4e4c1;
            overflow-x: hidden;
        }

        header {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            text-align: center;
            border-bottom: 2px solid #8b6914;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 100;
        }

        .book-title-header {
            font-size: 1.5rem;
            color: #f4e4c1;
            margin-bottom: 0.5rem;
        }

        .book-author-header {
            font-size: 1rem;
            color: #d4af37;
        }

        main {
            margin-top: 120px;
            padding: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 200px);
        }

        .book-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            height: 600px;
            margin: 0 auto;
        }

        .page {
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, #f8f6f0 0%, #faf8f2 100%);
            border: 1px solid #d4af37;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            padding: 3rem 2rem;
            color: #2c1810;
            font-size: 18pt;
            line-height: 1.6;
        }

        .page-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
        }

        .page-number {
            position: absolute;
            bottom: 20px;
            font-size: 14pt;
            color: #8b6914;
            font-style: italic;
        }

        .page-left .page-number {
            left: 20px;
        }

        .page-right .page-number {
            right: 20px;
        }

        .navigation {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 1rem;
            background: rgba(0, 0, 0, 0.7);
            padding: 1rem;
            border-radius: 50px;
            border: 2px solid #d4af37;
            z-index: 100;
        }

        .nav-btn {
            background: #8b6914;
            color: #f4e4c1;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16pt;
            font-family: 'Georgia', serif;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }

        .nav-btn:hover {
            background: #d4af37;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }

        .nav-btn:disabled {
            background: #555;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .back-to-library {
            background: #8b0000;
        }

        .back-to-library:hover {
            background: #dc143c;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            main {
                margin-top: 80px;
                padding: 0.5rem;
            }

            .book-container {
                width: 100%;
                height: 70vh;
                min-height: 400px;
                max-height: 600px;
            }

            .page {
                width: 100%;
                padding: 1.5rem 1rem;
                font-size: 16pt;
                line-height: 1.5;
            }

            .page-left {
                display: none;
            }

            .page-right {
                left: 0;
                right: 0;
                border-radius: 10px;
                transform-origin: center;
            }

            .page-right.flipped-right {
                transform: translateX(-100%) rotateY(180deg);
            }

            .page-right .page-number {
                left: 50%;
                transform: translateX(-50%);
            }

            .navigation {
                bottom: 15px;
                padding: 0.6rem;
                gap: 0.3rem;
                flex-wrap: wrap;
                justify-content: center;
            }

            .nav-btn {
                padding: 0.5rem 0.8rem;
                font-size: 12pt;
                min-width: 60px;
                touch-action: manipulation;
            }

            .book-title-header {
                font-size: 1.1rem;
            }

            .book-author-header {
                font-size: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            main {
                margin-top: 70px;
                padding: 0.25rem;
            }

            .book-container {
                height: 65vh;
                min-height: 350px;
                max-height: 500px;
            }

            .page {
                padding: 1rem 0.75rem;
                font-size: 14pt;
                line-height: 1.4;
            }

            .page-number {
                font-size: 12pt;
                bottom: 15px;
            }

            .navigation {
                bottom: 10px;
                padding: 0.5rem;
                gap: 0.2rem;
            }

            .nav-btn {
                padding: 0.4rem 0.6rem;
                font-size: 11pt;
                min-width: 50px;
            }

            .book-title-header {
                font-size: 1rem;
            }

            .book-author-header {
                font-size: 0.75rem;
            }
        }

        @media (max-width: 320px) {
            .book-container {
                height: 60vh;
                min-height: 300px;
                max-height: 450px;
            }

            .page {
                padding: 0.75rem 0.5rem;
                font-size: 12pt;
                line-height: 1.3;
            }

            .navigation {
                bottom: 5px;
                padding: 0.4rem;
            }

            .nav-btn {
                padding: 0.3rem 0.5rem;
                font-size: 10pt;
                min-width: 45px;
            }

            .book-title-header {
                font-size: 0.9rem;
            }

            .book-author-header {
                font-size: 0.7rem;
            }
        }

        /* Loading animation */
        @keyframes pageFlip {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(-180deg); }
        }

        .flipping {
            animation: pageFlip 1s ease-in-out;
        }
    </style>
</head>
<body>
    <header>
        <h1 class="book-title-header">Tales of Wisdom</h1>
        <p class="book-author-header">by R. Davis</p>
    </header>

    <main>
        <div class="book-container">
            <div id="book" style="width: 100%; height: 100%;">
                <div class="page">
                    <div class="page-content page-left">
                        <p>The old sage sat beneath the ancient oak tree, his eyes holding the patience of centuries. Young seekers came from far and wide to ask him the meaning of life, love, and suffering.</p>
                        <p>"Wisdom is not found in answers," he would say, "but in learning to ask better questions. The universe speaks to those who listen with their hearts, not just their ears."</p>
                        <p>He taught that every experience, whether joyful or painful, was a teacher. The trick was not to avoid lessons but to embrace them with gratitude and curiosity.</p>
                        <p>Like seasons, life moves through cycles of growth and rest, celebration and contemplation. Understanding these rhythms brings peace to the restless soul.</p>
                        <span class="page-number">1</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-right">
                        <p>The Tale of Two Rivers teaches about perspective. One river carved through mountains, the other flowed around them. Both reached the same ocean, but their journeys shaped different landscapes.</p>
                        <p>Wisdom flows like water – it seeks the path of least resistance but persists in reaching its destination. Sometimes the hardest route teaches the most valuable lessons.</p>
                        <p>The sage often spoke of the garden within each soul, where thoughts are seeds and actions are the water that helps them grow. We must tend this garden daily.</p>
                        <p>What you plant in your mind will eventually manifest in your life. Choose your seeds carefully, for they become the landscape of your future.</p>
                        <span class="page-number">2</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-left">
                        <p>The Mirror of Truth was a parable the sage loved to tell. A traveler sought a magical mirror that showed people their true selves, only to discover it was an ordinary reflecting pool.</p>
                        <p>The wisdom was not in the mirror but in the courage to look honestly at one's reflection, accepting both light and shadow as part of the whole.</p>
                        <p>We spend our lives collecting mirrors that reflect what we want to see, avoiding those that show uncomfortable truths. True wisdom begins when we embrace all parts of ourselves.</p>
                        <p>The sage taught that acceptance is not resignation; it is the foundation upon which transformation is built. You cannot change what you refuse to acknowledge.</p>
                        <span class="page-number">3</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-right">
                        <p>The Story of the Broken Cup teaches about impermanence. A prized cup shattered, and its owner mourned for days. The sage asked, "Did you love the cup for its beauty, or for its permanence?"</p>
                        <p>Everything in life is temporary – joy, sorrow, success, failure, even life itself. Wisdom is found in appreciating each moment without clinging to its outcome.</p>
                        <p>The Japanese art of kintsugi repairs broken pottery with gold, teaching that broken places can become sources of beauty and strength. Our scars tell stories of survival.</p>
                        <p>Nothing lasts forever, and this is not tragedy but liberation. It means every moment is precious precisely because it will not come again.</p>
                        <span class="page-number">4</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-left">
                        <p>The Lantern in the Dark reminds us that we all carry light within us, even when we cannot see it. A traveler lost in darkness discovered his own lantern was already lit.</p>
                        <p>We search endlessly for external sources of wisdom, truth, and guidance, forgetting that the deepest knowing already resides within our own hearts.</p>
                        <p>The sage taught that silence is not emptiness but fullness – the space where wisdom speaks most clearly. In the noise of daily life, we miss the whispers of our soul.</p>
                        <p>Take time to sit in stillness, to listen without expectation, to be present without agenda. Wisdom comes not from seeking but from allowing it to find you.</p>
                        <span class="page-number">5</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-right">
                        <p>The final tale the sage shared was about a tree that gave shade without expectation of return. It simply fulfilled its purpose, knowing that giving was its greatest reward.</p>
                        <p>True wisdom is not accumulated knowledge but embodied understanding. It lives in how we treat others, how we face challenges, how we find meaning in the ordinary.</p>
                        <p>The sage would smile and say, "The wisest people I have known were not those who had all the answers, but those who lived their questions with grace and curiosity."</p>
                        <p>Life itself is the greatest teacher. Every sunrise, every conversation, every challenge holds wisdom for those who approach it with an open heart and a willing spirit.</p>
                        <span class="page-number">6</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <nav class="navigation">
        <button class="nav-btn" id="prevBtn" onclick="previousPage()">← Previous</button>
        <button class="nav-btn back-to-library" onclick="backToLibrary()">📚 Library</button>
        <button class="nav-btn" id="nextBtn" onclick="nextPage()">Next →</button>
    </nav>

    <script type="module">
        import { PageFlip } from "https://cdn.skypack.dev/page-flip@2.0.7";

        let pageFlip;

        // Initialize PageFlip when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            const bookElement = document.getElementById('book');
            const isMobile = window.innerWidth <= 768;

            pageFlip = new PageFlip(bookElement, {
                width: isMobile ? Math.min(window.innerWidth * 0.9, 400) : 900,
                height: isMobile ? Math.min(window.innerHeight * 0.6, 500) : 600,
                size: isMobile ? 'stretch' : 'fixed',
                minWidth: 300,
                maxWidth: 1200,
                minHeight: 400,
                maxHeight: 800,
                showCover: false,
                mobileScrollSupport: true,
                flipDuration: 800,
                useMouseEvents: true
            });

            // Load pages
            pageFlip.loadFromHTML(document.querySelectorAll('.page'));

            // Update button states
            updateButtonStates();

            // Event listeners for page flip
            pageFlip.on('flip', (e) => {
                updateButtonStates();
            });

            // Handle window resize
            window.addEventListener('resize', () => {
                const newMobile = window.innerWidth <= 768;
                if (newMobile !== isMobile) {
                    location.reload(); // Reload to reinitialize with correct settings
                }
            });
        });

        function nextPage() {
            if (pageFlip) {
                pageFlip.flipNext();
            }
        }

        function previousPage() {
            if (pageFlip) {
                pageFlip.flipPrev();
            }
        }

        function backToLibrary() {
            window.location.href = '../index.html';
        }

        function updateButtonStates() {
            if (pageFlip) {
                const pageCount = pageFlip.getPageCount();
                const currentPageIndex = pageFlip.getCurrentPageIndex();

                document.getElementById('prevBtn').disabled = currentPageIndex === 0;
                document.getElementById('nextBtn').disabled = currentPageIndex >= pageCount - 1;
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') nextPage();
            if (e.key === 'ArrowLeft') previousPage();
            if (e.key === 'Escape') backToLibrary();
        });

        // Make functions available globally for onclick handlers
        window.nextPage = nextPage;
        window.previousPage = previousPage;
        window.backToLibrary = backToLibrary;
    </script>
</body>
</html>
