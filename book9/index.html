<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Red Path - Digital Library</title>
    <script type="module">
        import { PageFlip } from "https://cdn.skypack.dev/page-flip@2.0.7";
        window.PageFlip = PageFlip;
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #2c1810 0%, #4a2c1a 100%);
            min-height: 100vh;
            color: #f4e4c1;
            overflow-x: hidden;
        }

        header {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            text-align: center;
            border-bottom: 2px solid #8b6914;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 100;
        }

        .book-title-header {
            font-size: 1.5rem;
            color: #f4e4c1;
            margin-bottom: 0.5rem;
        }

        .book-author-header {
            font-size: 1rem;
            color: #d4af37;
        }

        main {
            margin-top: 120px;
            padding: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 200px);
        }

        .book-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            height: 600px;
            margin: 0 auto;
        }

        .page {
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, #f8f6f0 0%, #faf8f2 100%);
            border: 1px solid #d4af37;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            padding: 3rem 2rem;
            color: #2c1810;
            font-size: 18pt;
            line-height: 1.6;
        }

        .page-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
        }

        .page-number {
            position: absolute;
            bottom: 20px;
            font-size: 14pt;
            color: #8b6914;
            font-style: italic;
        }

        .page-left .page-number {
            left: 20px;
        }

        .page-right .page-number {
            right: 20px;
        }

        .navigation {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 1rem;
            background: rgba(0, 0, 0, 0.7);
            padding: 1rem;
            border-radius: 50px;
            border: 2px solid #d4af37;
            z-index: 100;
        }

        .nav-btn {
            background: #8b6914;
            color: #f4e4c1;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16pt;
            font-family: 'Georgia', serif;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }

        .nav-btn:hover {
            background: #d4af37;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }

        .nav-btn:disabled {
            background: #555;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .back-to-library {
            background: #8b0000;
        }

        .back-to-library:hover {
            background: #dc143c;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            main {
                margin-top: 100px;
                padding: 1rem;
            }

            .book {
                height: 500px;
            }

            .page {
                width: 100%;
                padding: 2rem 1.5rem;
                font-size: 18pt;
            }

            .page-left {
                display: none;
            }

            .page-right {
                left: 0;
                right: 0;
                border-radius: 10px;
                transform-origin: center;
            }

            .page-right.flipped-right {
                transform: translateX(-100%) rotateY(180deg);
            }

            .page-right .page-number {
                left: 50%;
                transform: translateX(-50%);
            }

            .navigation {
                bottom: 20px;
                padding: 0.8rem;
                gap: 0.5rem;
            }

            .nav-btn {
                padding: 0.6rem 1rem;
                font-size: 14pt;
            }

            .book-title-header {
                font-size: 1.2rem;
            }

            .book-author-header {
                font-size: 0.9rem;
            }
        }

        /* Loading animation */
        @keyframes pageFlip {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(-180deg); }
        }

        .flipping {
            animation: pageFlip 1s ease-in-out;
        }
    </style>
</head>
<body>
    <header>
        <h1 class="book-title-header">The Red Path</h1>
        <p class="book-author-header">by D. Anderson</p>
    </header>

    <main>
        <div class="book-container">
            <div id="book" style="width: 100%; height: 100%;">
                <div class="page">
                    <div class="page-content page-left">
                        <p>Marcus Rivera had spent twenty years as a corporate lawyer, chasing promotions and bonuses until the day he found an old map in his grandfather's attic – a map showing a trail marked in red through the Amazon rainforest.</p>
                        <p>The map was labeled simply "El Camino Rojo" – The Red Path. His grandfather's journal spoke of it as a journey that changed whoever walked it, a test of spirit and will that revealed a person's true self.</p>
                        <p>Against all logic, Marcus quit his job, sold his possessions, and bought a one-way ticket to Brazil. Something about the map called to him, promising answers to questions he didn't even know he had.</p>
                        <p>The journey began in a small village where the locals spoke of the Red Path in whispers, calling it both a blessing and a curse. Some who walked it returned transformed, wiser and more alive than before. Others never returned at all.</p>
                        <span class="page-number">1</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-right">
                        <p>The first week tested Marcus's body as he hiked through dense jungle, crossed raging rivers, and climbed steep mountain passes. Every muscle ached, every breath burned, but something kept him moving forward.</p>
                        <p>He met other travelers on the path – a young woman seeking to outrun her past, an old man searching for meaning in his final years, a group of friends who thought it would be an adventure. Each carried their own reasons for walking the Red Path.</p>
                        <p>The jungle seemed alive with purpose, presenting challenges that were both physical and spiritual. Marcus faced his fears, his limitations, his assumptions about who he was and what he was capable of.</p>
                        <p>At night, sitting around campfires, the travelers shared stories. Marcus realized that everyone was running from something or toward something, and the Red Path was the place where those journeys intersected.</p>
                        <span class="page-number">2</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-left">
                        <p>The second phase of the journey tested Marcus's mind. The path led through ancient ruins where strange symbols glowed in the moonlight, where puzzles carved into stone had to be solved to pass.</p>
                        <p>He discovered that his legal training, his years of logical thinking and problem-solving, were useless here. The challenges required intuition, creativity, and a willingness to see beyond conventional solutions.</p>
                        <p>The travelers who relied only on physical strength or intellectual prowess began to struggle. Those who remained were learning to balance heart and mind, instinct and reason, action and contemplation.</p>
                        <p>Marcus found himself changing, letting go of the rigid mindset that had defined his career. He began to trust his gut feelings, to see patterns where others saw chaos, to understand that some truths couldn't be proven in a courtroom or written in a contract.</p>
                        <span class="page-number">3</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-right">
                        <p>In the third week, the journey became deeply personal. The Red Path seemed to know each traveler's deepest fears and insecurities, presenting challenges that targeted their weakest points.</p>
                        <p>Marcus faced visions of the life he had left behind – the corner office, the expensive car, the respect of his colleagues. For the first time, he questioned whether he had made the right choice.</p>
                        <p>An old shaman appeared, explaining that the Red Path wasn't about reaching a destination but about the transformation that happened along the way. Each challenge was designed to strip away what wasn't essential, revealing the core of who each person truly was.</p>
                        <p>Marcus realized he had been wearing masks his entire life – the successful lawyer, the dutiful son, the reliable friend. The Red Path was asking him to find out who he was when all the masks were removed.</p>
                        <span class="page-number">4</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-left">
                        <p>The final approach to the heart of the Red Path was the most difficult. The terrain became treacherous, the weather unpredictable, the challenges seemingly impossible to overcome.</p>
                        <p>One by one, travelers turned back, unable to face what the path demanded of them. Marcus continued, driven by something deeper than determination or stubbornness – a growing understanding of what the journey was really about.</p>
                        <p>At the center of the Red Path, there was no treasure, no ancient wisdom carved in stone, no mystical revelation. There was only a mirror that reflected not how Marcus looked, but who he was.</p>
                        <p>He saw all his failures and successes, his fears and hopes, his strengths and weaknesses. He saw the man he had been and the man he could become. And he understood that the choice was always his.</p>
                        <span class="page-number">5</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-right">
                        <p>Marcus emerged from the jungle three months after he had entered, but he felt like he had lived a lifetime. The world looked the same, but he saw it differently.</p>
                        <p>He returned to his old life but couldn't go back to being the person he had been. The corporate world seemed small and meaningless compared to what he had experienced. The promotions and bonuses that had once motivated him now felt empty.</p>
                        <p>Instead of returning to his law firm, Marcus started a foundation that helped others find their own Red Path – their own journeys of self-discovery and transformation. He became a guide, a mentor, someone who could help others navigate their own paths.</p>
                        <p>He kept the map, but now he understood that the Red Path wasn't a trail through the jungle – it was a journey that existed within everyone, waiting to be discovered by those brave enough to seek it.</p>
                        <span class="page-number">6</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <nav class="navigation">
        <button class="nav-btn" id="prevBtn" onclick="previousPage()">← Previous</button>
        <button class="nav-btn back-to-library" onclick="backToLibrary()">📚 Library</button>
        <button class="nav-btn" id="nextBtn" onclick="nextPage()">Next →</button>
    </nav>

    <script type="module">
        import { PageFlip } from "https://cdn.skypack.dev/page-flip@2.0.7";

        let pageFlip;

        // Initialize PageFlip when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            const bookElement = document.getElementById('book');
            const isMobile = window.innerWidth <= 768;

            pageFlip = new PageFlip(bookElement, {
                width: isMobile ? 400 : 900,
                height: 600,
                size: isMobile ? 'stretch' : 'fixed',
                minWidth: 300,
                maxWidth: 1200,
                minHeight: 400,
                maxHeight: 800,
                showCover: false,
                mobileScrollSupport: true,
                flipDuration: 800,
                useMouseEvents: true
            });

            // Load pages
            pageFlip.loadFromHTML(document.querySelectorAll('.page'));

            // Update button states
            updateButtonStates();

            // Event listeners for page flip
            pageFlip.on('flip', (e) => {
                updateButtonStates();
            });

            // Handle window resize
            window.addEventListener('resize', () => {
                const newMobile = window.innerWidth <= 768;
                if (newMobile !== isMobile) {
                    location.reload(); // Reload to reinitialize with correct settings
                }
            });
        });

        function nextPage() {
            if (pageFlip) {
                pageFlip.flipNext();
            }
        }

        function previousPage() {
            if (pageFlip) {
                pageFlip.flipPrev();
            }
        }

        function backToLibrary() {
            window.location.href = '../index.html';
        }

        function updateButtonStates() {
            if (pageFlip) {
                const pageCount = pageFlip.getPageCount();
                const currentPageIndex = pageFlip.getCurrentPageIndex();

                document.getElementById('prevBtn').disabled = currentPageIndex === 0;
                document.getElementById('nextBtn').disabled = currentPageIndex >= pageCount - 1;
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') nextPage();
            if (e.key === 'ArrowLeft') previousPage();
            if (e.key === 'Escape') backToLibrary();
        });

        // Make functions available globally for onclick handlers
        window.nextPage = nextPage;
        window.previousPage = previousPage;
        window.backToLibrary = backToLibrary;
    </script>
</body>
</html>