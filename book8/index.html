<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Echoes of Time - Digital Library</title>
    <script type="module">
        import { PageFlip } from "https://cdn.skypack.dev/page-flip@2.0.7";
        window.PageFlip = PageFlip;
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #2c1810 0%, #4a2c1a 100%);
            min-height: 100vh;
            color: #f4e4c1;
            overflow-x: hidden;
        }

        header {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            text-align: center;
            border-bottom: 2px solid #8b6914;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 100;
        }

        .book-title-header {
            font-size: 1.5rem;
            color: #f4e4c1;
            margin-bottom: 0.5rem;
        }

        .book-author-header {
            font-size: 1rem;
            color: #d4af37;
        }

        main {
            margin-top: 120px;
            padding: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 200px);
        }

        .book-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            height: 600px;
            margin: 0 auto;
        }

        .page {
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, #f8f6f0 0%, #faf8f2 100%);
            border: 1px solid #d4af37;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            padding: 3rem 2rem;
            color: #2c1810;
            font-size: 18pt;
            line-height: 1.6;
        }

        .page-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
        }

        .page-number {
            position: absolute;
            bottom: 20px;
            font-size: 14pt;
            color: #8b6914;
            font-style: italic;
        }

        .page-left .page-number {
            left: 20px;
        }

        .page-right .page-number {
            right: 20px;
        }

        .navigation {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 1rem;
            background: rgba(0, 0, 0, 0.7);
            padding: 1rem;
            border-radius: 50px;
            border: 2px solid #d4af37;
            z-index: 100;
        }

        .nav-btn {
            background: #8b6914;
            color: #f4e4c1;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16pt;
            font-family: 'Georgia', serif;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }

        .nav-btn:hover {
            background: #d4af37;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }

        .nav-btn:disabled {
            background: #555;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .back-to-library {
            background: #8b0000;
        }

        .back-to-library:hover {
            background: #dc143c;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            main {
                margin-top: 100px;
                padding: 1rem;
            }

            .book {
                height: 500px;
            }

            .page {
                width: 100%;
                padding: 2rem 1.5rem;
                font-size: 18pt;
            }

            .page-left {
                display: none;
            }

            .page-right {
                left: 0;
                right: 0;
                border-radius: 10px;
                transform-origin: center;
            }

            .page-right.flipped-right {
                transform: translateX(-100%) rotateY(180deg);
            }

            .page-right .page-number {
                left: 50%;
                transform: translateX(-50%);
            }

            .navigation {
                bottom: 20px;
                padding: 0.8rem;
                gap: 0.5rem;
            }

            .nav-btn {
                padding: 0.6rem 1rem;
                font-size: 14pt;
            }

            .book-title-header {
                font-size: 1.2rem;
            }

            .book-author-header {
                font-size: 0.9rem;
            }
        }

        /* Loading animation */
        @keyframes pageFlip {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(-180deg); }
        }

        .flipping {
            animation: pageFlip 1s ease-in-out;
        }
    </style>
</head>
<body>
    <header>
        <h1 class="book-title-header">Echoes of Time</h1>
        <p class="book-author-header">by L. Taylor</p>
    </header>

    <main>
        <div class="book-container">
            <div id="book" style="width: 100%; height: 100%;">
                <div class="page">
                    <div class="page-content page-left">
                        <p>Dr. Sarah Mitchell discovered it by accident – a temporal anomaly in her laboratory, a shimmer in the air that shouldn't exist. The moment she touched it, she was somewhere else, somewhen else.</p>
                        <p>She found herself standing in Victorian London, the air thick with coal smoke and horse-drawn carriages clattering along cobblestone streets. But something was wrong – people couldn't see her, couldn't hear her, passed through her like she was a ghost.</p>
                        <p>Sarah was an echo, a temporal imprint that could observe but not interact, a silent witness to moments that had already happened. She was trapped between seconds, invisible to time itself.</p>
                        <p>Back in her laboratory, only moments had passed, but Sarah had lived through days. She had discovered time travel, but it was nothing like the stories – no changing history, no grand adventures, just the agony of watching and being unable to touch.</p>
                        <span class="page-number">1</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-right">
                        <p>The more Sarah used the anomaly, the more she began to see – the echoes of other travelers, other people trapped between moments. She wasn't alone in this timeless space between what was and what could be.</p>
                        <p>She met Marcus, a Roman soldier who had fallen through a similar rift nearly two thousand years ago. He had watched empires rise and fall, seen the birth and death of countless generations.</p>
                        <p>Together they discovered that every major historical event left temporal scars, places where time was thin and the echoes could gather. They were the silent audience to humanity's greatest triumphs and tragedies.</p>
                        <p>But the anomaly was growing stronger, and Sarah realized that with each journey, she was becoming less real, more echo than substance, fading slowly into the timeless spaces between moments.</p>
                        <span class="page-number">2</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-left">
                        <p>The echoes learned to communicate through the temporal scars they shared, leaving messages for each other across centuries. Sarah discovered she could influence things subtly – a door left unlocked, a warning whispered that seemed like the wind.</p>
                        <p>She began to understand that the echoes served a purpose, that they were the universe's way of remembering, of preserving what otherwise would be lost to the endless march of time.</p>
                        <p>Sarah watched her own past unfold, saw moments she had forgotten, understood decisions that had shaped her life. She saw the patterns that connected everything, the threads of causality that bound moments together across lifetimes.</p>
                        <p>But she also saw that every action, every choice, created ripples that echoed through time, affecting people she would never meet, shaping futures she would never see.</p>
                        <span class="page-number">3</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-right">
                        <p>The anomaly revealed its true nature – it wasn't a flaw in reality but a feature, a dimension where time existed all at once, where past, present, and future were different views of the same eternal moment.</p>
                        <p>Sarah began to see the future, not as fixed events but as probabilities, as branches of possibility that spread from every decision like tree limbs. She saw that free will and destiny were two sides of the same coin.</p>
                        <p>The other echoes taught her that their purpose wasn't to change history but to preserve it, to remember what had been so that humanity wouldn't repeat its mistakes.</p>
                        <p>They were the guardians of memory, the keepers of what otherwise would be forgotten. Their curse was also their gift – to see everything but change nothing, to know everything but be unable to share it.</p>
                        <span class="page-number">4</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-left">
                        <p>Sarah discovered she could return to her own time, but each journey made her more connected to the temporal space between moments. She was becoming part of the anomaly itself, losing her physical form while gaining timeless understanding.</p>
                        <p>She faced a choice: return to normal life and forget everything she had learned, or embrace her new existence as a guardian of time, an eternal echo watching over humanity's journey.</p>
                        <p>In the moments between heartbeats, she saw everything – the birth of stars, the death of galaxies, the entire story of existence playing out in an eternal dance of cause and effect.</p>
                        <p>Sarah understood that time wasn't a line but a tapestry, and the echoes were the threads that connected everything, giving meaning to moments that otherwise would drift apart in the vastness of eternity.</p>
                        <span class="page-number">5</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-right">
                        <p>Sarah made her choice, but not the one anyone expected. She found a way to bridge the gap between the temporal and physical worlds, becoming the first person who could exist in both simultaneously.</p>
                        <p>She returned to her laboratory, but she was different now – carrying within her the wisdom of ages, the memory of countless lifetimes, the understanding of how everything connected.</p>
                        <p>The anomaly didn't close, but it stabilized, becoming a gateway that others could use when they were ready, when they had earned the right to see beyond their own moment in time.</p>
                        <p>Sarah became the guardian of the threshold, helping others understand that the past wasn't behind them and the future wasn't ahead of them – they were all happening right now, in the eternal present that contained everything that ever was and ever could be.</p>
                        <span class="page-number">6</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <nav class="navigation">
        <button class="nav-btn" id="prevBtn" onclick="previousPage()">← Previous</button>
        <button class="nav-btn back-to-library" onclick="backToLibrary()">📚 Library</button>
        <button class="nav-btn" id="nextBtn" onclick="nextPage()">Next →</button>
    </nav>

    <script type="module">
        import { PageFlip } from "https://cdn.skypack.dev/page-flip@2.0.7";

        let pageFlip;

        // Initialize PageFlip when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            const bookElement = document.getElementById('book');
            const isMobile = window.innerWidth <= 768;

            pageFlip = new PageFlip(bookElement, {
                width: isMobile ? 400 : 900,
                height: 600,
                size: isMobile ? 'stretch' : 'fixed',
                minWidth: 300,
                maxWidth: 1200,
                minHeight: 400,
                maxHeight: 800,
                showCover: false,
                mobileScrollSupport: true,
                flipDuration: 800,
                useMouseEvents: true
            });

            // Load pages
            pageFlip.loadFromHTML(document.querySelectorAll('.page'));

            // Update button states
            updateButtonStates();

            // Event listeners for page flip
            pageFlip.on('flip', (e) => {
                updateButtonStates();
            });

            // Handle window resize
            window.addEventListener('resize', () => {
                const newMobile = window.innerWidth <= 768;
                if (newMobile !== isMobile) {
                    location.reload(); // Reload to reinitialize with correct settings
                }
            });
        });

        function nextPage() {
            if (pageFlip) {
                pageFlip.flipNext();
            }
        }

        function previousPage() {
            if (pageFlip) {
                pageFlip.flipPrev();
            }
        }

        function backToLibrary() {
            window.location.href = '../index.html';
        }

        function updateButtonStates() {
            if (pageFlip) {
                const pageCount = pageFlip.getPageCount();
                const currentPageIndex = pageFlip.getCurrentPageIndex();

                document.getElementById('prevBtn').disabled = currentPageIndex === 0;
                document.getElementById('nextBtn').disabled = currentPageIndex >= pageCount - 1;
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') nextPage();
            if (e.key === 'ArrowLeft') previousPage();
            if (e.key === 'Escape') backToLibrary();
        });

        // Make functions available globally for onclick handlers
        window.nextPage = nextPage;
        window.previousPage = previousPage;
        window.backToLibrary = backToLibrary;
    </script>
</body>
</html>