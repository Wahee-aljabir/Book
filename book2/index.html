<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mystery of the Past - Digital Library</title>
    <script type="module">
        import { PageFlip } from "https://cdn.skypack.dev/page-flip@2.0.7";
        window.PageFlip = PageFlip;
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #2c1810 0%, #4a2c1a 100%);
            min-height: 100vh;
            color: #f4e4c1;
            overflow-x: hidden;
        }

        header {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            text-align: center;
            border-bottom: 2px solid #8b6914;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 100;
        }

        .book-title-header {
            font-size: 1.5rem;
            color: #f4e4c1;
            margin-bottom: 0.5rem;
        }

        .book-author-header {
            font-size: 1rem;
            color: #d4af37;
        }

        main {
            margin-top: 120px;
            padding: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 200px);
        }

        .book-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            height: 600px;
            margin: 0 auto;
        }

        .page {
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, #f8f6f0 0%, #faf8f2 100%);
            border: 1px solid #d4af37;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            padding: 3rem 2rem;
            color: #2c1810;
            font-size: 18pt;
            line-height: 1.6;
        }

        .page-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
        }

        .page-number {
            position: absolute;
            bottom: 20px;
            font-size: 14pt;
            color: #8b6914;
            font-style: italic;
        }

        .page-left .page-number {
            left: 20px;
        }

        .page-right .page-number {
            right: 20px;
        }

        .navigation {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 1rem;
            background: rgba(0, 0, 0, 0.7);
            padding: 1rem;
            border-radius: 50px;
            border: 2px solid #d4af37;
            z-index: 100;
        }

        .nav-btn {
            background: #8b6914;
            color: #f4e4c1;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16pt;
            font-family: 'Georgia', serif;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }

        .nav-btn:hover {
            background: #d4af37;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }

        .nav-btn:disabled {
            background: #555;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .back-to-library {
            background: #8b0000;
        }

        .back-to-library:hover {
            background: #dc143c;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            main {
                margin-top: 100px;
                padding: 1rem;
            }

            .book {
                height: 500px;
            }

            .page {
                width: 100%;
                padding: 2rem 1.5rem;
                font-size: 18pt;
            }

            .page-left {
                display: none;
            }

            .page-right {
                left: 0;
                right: 0;
                border-radius: 10px;
                transform-origin: center;
            }

            .page-right.flipped-right {
                transform: translateX(-100%) rotateY(180deg);
            }

            .page-right .page-number {
                left: 50%;
                transform: translateX(-50%);
            }

            .navigation {
                bottom: 20px;
                padding: 0.8rem;
                gap: 0.5rem;
            }

            .nav-btn {
                padding: 0.6rem 1rem;
                font-size: 14pt;
            }

            .book-title-header {
                font-size: 1.2rem;
            }

            .book-author-header {
                font-size: 0.9rem;
            }
        }

        /* Loading animation */
        @keyframes pageFlip {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(-180deg); }
        }

        .flipping {
            animation: pageFlip 1s ease-in-out;
        }
    </style>
</head>
<body>
    <header>
        <h1 class="book-title-header">Mystery of the Past</h1>
        <p class="book-author-header">by M. Johnson</p>
    </header>

    <main>
        <div class="book-container">
            <div id="book" style="width: 100%; height: 100%;">
                <div class="page">
                    <div class="page-content page-left">
                        <p>The old mansion stood silhouetted against the stormy sky, its windows like vacant eyes staring out across the overgrown gardens that had once been the pride of the wealthy Harrington family.</p>
                        <p>Detective Sarah Chen stepped carefully through the broken front gate, her flashlight beam cutting through the mist that clung to the ground like a shroud, hiding secrets that had been buried for decades.</p>
                        <p>Fifty years ago, on this very night, the entire Harrington family had vanished without a trace, leaving behind a half-eaten dinner, untouched bedrooms, and a mystery that would haunt the small town for generations.</p>
                        <p>Now, as the storm raged around her, Sarah was determined to finally uncover the truth about what really happened in that house, armed with new evidence and a determination that had brought her back to this place of shadows and whispers.</p>
                        <span class="page-number">1</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-right">
                        <p>Inside the mansion, time seemed to have stood still. Dust covered every surface like a soft blanket, and in the dining room, plates still sat on the table as if waiting for diners who would never return.</p>
                        <p>Sarah's investigation had led her here after discovering a hidden compartment in the grandfather clock that had been removed from the house years ago, containing a diary written in a code that only now could be deciphered.</p>
                        <p>The diary spoke of strange visitors arriving on the night of the disappearance, of symbols drawn in chalk on the floor, and of a family secret so terrible that it had to be protected at any cost.</p>
                        <p>As thunder rattled the windows, Sarah found herself drawn to the library, where something seemed to be calling to her from behind the walls, a whisper of truth that had waited half a century to be heard.</p>
                        <span class="page-number">2</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-left">
                        <p>In the library, Sarah discovered that one of the bookshelves was actually a hidden door, its mechanism triggered by pressing a specific sequence of books that matched the constellations mentioned in the diary.</p>
                        <p>Behind the door lay a staircase leading down into darkness, the air thick with the smell of earth and something else – something metallic and ancient that spoke of blood and betrayal.</p>
                        <p>The walls of the hidden passage were covered with the same symbols from the diary, now glowing faintly in the flashlight beam, forming a map that led deeper into the mystery of the Harrington family's disappearance.</p>
                        <p>At the bottom of the stairs, Sarah found a chamber that had been sealed for fifty years, containing not bodies, but evidence of something far more shocking – the family had not been killed, but had chosen to disappear, protecting a secret that could change the world.</p>
                        <span class="page-number">3</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-right">
                        <p>The chamber contained journals, photographs, and documents that revealed the truth: the Harringtons had discovered a scientific breakthrough so profound that powerful forces would stop at nothing to possess it.</p>
                        <p>They had faked their deaths and created an elaborate underground sanctuary, where they continued their work in secret, guarded by an elaborate network of symbols and mechanisms designed to keep intruders away.</p>
                        <p>The diary Sarah had found was actually a key, designed to lead someone worthy to the truth when the time was right, when the world was ready to handle the knowledge they had protected for so long.</p>
                        <p>As Sarah read through the documents, she realized that the family was still alive, their descendants continuing the work in hidden locations around the world, waiting for the moment when humanity would be ready for their revelation.</p>
                        <span class="page-number">4</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-left">
                        <p>The scientific breakthrough the Harringtons had discovered was a method of harnessing clean, limitless energy from quantum fluctuations – something that could solve the world's energy crisis but would also disrupt the entire global economy.</p>
                        <p>They had calculated that humanity was not ready for such technology in the 1970s, fearing it would lead to wars and conflicts as nations fought to control the power source.</p>
                        <p>Instead, they had chosen to protect the knowledge, developing it in secret while preparing humanity through subtle guidance – funding research, supporting education, and working behind the scenes to create a world capable of handling such responsibility.</p>
                        <p>Sarah now understood why the mystery had been so carefully constructed – it was not just about protecting a secret, but about protecting humanity from itself until it was ready to ascend to a new level of existence.</p>
                        <span class="page-number">5</span>
                    </div>
                </div>
                <div class="page">
                    <div class="page-content page-right">
                        <p>As dawn broke over the horizon, Sarah made a decision that would change everything. She couldn't reveal the full truth to the world, but she could begin preparing humanity for the revelation that was to come.</p>
                        <p>The Harringtons, now elderly and watching from their hidden sanctuary, had seen Sarah coming through their calculations and prophecies – she was the one who would bridge the gap between their secret world and the public one.</p>
                        <p>With the evidence carefully preserved and a new understanding of her mission, Sarah left the mansion that morning not as a detective who had solved a cold case, but as a guardian of humanity's future.</p>
                        <p>The mystery of the past had become the key to the future, and Sarah Chen had become the keeper of a secret that would one day transform the world – when the time was right, and when humanity was ready to receive the gift the Harringtons had protected for so long.</p>
                        <span class="page-number">6</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <nav class="navigation">
        <button class="nav-btn" id="prevBtn" onclick="previousPage()">← Previous</button>
        <button class="nav-btn back-to-library" onclick="backToLibrary()">📚 Library</button>
        <button class="nav-btn" id="nextBtn" onclick="nextPage()">Next →</button>
    </nav>

    <script type="module">
        import { PageFlip } from "https://cdn.skypack.dev/page-flip@2.0.7";

        let pageFlip;

        // Initialize PageFlip when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            const bookElement = document.getElementById('book');
            const isMobile = window.innerWidth <= 768;

            pageFlip = new PageFlip(bookElement, {
                width: isMobile ? 400 : 900,
                height: 600,
                size: isMobile ? 'stretch' : 'fixed',
                minWidth: 300,
                maxWidth: 1200,
                minHeight: 400,
                maxHeight: 800,
                showCover: false,
                mobileScrollSupport: true,
                flipDuration: 800,
                useMouseEvents: true
            });

            // Load pages
            pageFlip.loadFromHTML(document.querySelectorAll('.page'));

            // Update button states
            updateButtonStates();

            // Event listeners for page flip
            pageFlip.on('flip', (e) => {
                updateButtonStates();
            });

            // Handle window resize
            window.addEventListener('resize', () => {
                const newMobile = window.innerWidth <= 768;
                if (newMobile !== isMobile) {
                    location.reload(); // Reload to reinitialize with correct settings
                }
            });
        });

        function nextPage() {
            if (pageFlip) {
                pageFlip.flipNext();
            }
        }

        function previousPage() {
            if (pageFlip) {
                pageFlip.flipPrev();
            }
        }

        function backToLibrary() {
            window.location.href = '../index.html';
        }

        function updateButtonStates() {
            if (pageFlip) {
                const pageCount = pageFlip.getPageCount();
                const currentPageIndex = pageFlip.getCurrentPageIndex();

                document.getElementById('prevBtn').disabled = currentPageIndex === 0;
                document.getElementById('nextBtn').disabled = currentPageIndex >= pageCount - 1;
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') nextPage();
            if (e.key === 'ArrowLeft') previousPage();
            if (e.key === 'Escape') backToLibrary();
        });

        // Make functions available globally for onclick handlers
        window.nextPage = nextPage;
        window.previousPage = previousPage;
        window.backToLibrary = backToLibrary;
    </script>
</body>
</html>